/* ===================================================================
   globals.css â€” Cosmic Portfolio Theme (Tailwind v4)
   =================================================================== */

@import "tailwindcss";

/* ===== Base Theme (fallback) ===== */
@theme {
  --color-primary: #a855f7;
  --color-accent: #06b6d4;   /* cyan */
  --color-accent-2: #f59e0b; /* amber */
  --color-glow: #e9d5ff;
}

/* ===== Root + Themes ===== */
html { scroll-behavior: smooth; }
body {
  background: radial-gradient(1200px 800px at 20% 10%, var(--color-bg-2, #14082e), var(--color-bg-1, #06021a));
  color: white;
}

:root[data-theme="cosmic"]{
  --color-primary:#a855f7; --color-accent:#06b6d4; --color-accent-2:#f59e0b; --color-glow:#e9d5ff;
  --color-bg-1:#06021a; --color-bg-2:#14082e;
}
:root[data-theme="aurora"]{
  --color-primary:#22d3ee; --color-accent:#34d399; --color-accent-2:#f472b6; --color-glow:#cffafe;
  --color-bg-1:#001219; --color-bg-2:#04141f;
}
:root[data-theme="sunset"]{
  --color-primary:#fb7185; --color-accent:#f59e0b; --color-accent-2:#8b5cf6; --color-glow:#ffd6a5;
  --color-bg-1:#160708; --color-bg-2:#2a0a0d;
}
:root[data-theme="neon"]{
  --color-primary:#fcd34d; --color-accent:#22d3ee; --color-accent-2:#f472b6; --color-glow:#fef9c3;
  --color-bg-1:#020202; --color-bg-2:#000000;
}

/* High-contrast mode boosts borders/text and shadows */
:root[data-contrast="high"]{
  --hc-border: 3px;
  --hc-shadow: 0 14px 50px rgba(255,255,255,.15);
  --hc-text: 1;
}

/* ===== Layout Helpers ===== */
.section {
  max-width: 72rem;
  margin-left: auto; margin-right: auto;
  padding-left: clamp(1rem, 4vw, 2rem);
  padding-right: clamp(1rem, 4vw, 2rem);
  padding-top: clamp(4rem, 6vw, 6rem);
  padding-bottom: clamp(4rem, 6vw, 6rem);
}

/* ===== Animations ===== */
@keyframes floatY { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-6px)} }
@keyframes spinSlow { to { transform: rotate(360deg) } }
@keyframes pulseGlow {
  0%,100% { box-shadow: 0 0 0 0 rgba(168,85,247,0.5) }
  50% { box-shadow: 0 0 40px 6px rgba(168,85,247,0.25) }
}
@keyframes caretBlink { 50% { opacity: 0 } }

/* ===== Panels / Titles ===== */
.panel {
  border-radius: 18px;
  background: color-mix(in oklab, white 6%, transparent);
  backdrop-filter: blur(8px);
  border: var(--hc-border, 2px) solid transparent;
  border-image: linear-gradient(135deg, black, var(--color-primary), var(--color-accent-2)) 1;
  box-shadow: 8px 8px 0 0 black, var(--hc-shadow, 0 10px 40px rgba(168,85,247,.25));
}
.title { font-weight: 900; letter-spacing: .5px; text-shadow: 2px 2px 0 black; }

/* ===== Buttons ===== */
.btn {
  display: inline-flex; align-items: center; gap: .5rem;
  padding: .65rem 1rem; border-radius: .8rem;
  border: var(--hc-border, 2px) solid black;
  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
  color: black; font-weight: 700;
  box-shadow: 6px 6px 0 0 black;
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
}
.btn:hover { transform: translateY(-1px); box-shadow: 8px 8px 0 0 black; filter: saturate(1.15); }

/* ===== Chips ===== */
.chip {
  font-size: .75rem; padding: .25rem .5rem; border-radius: 9999px;
  border: var(--hc-border, 2px) solid black;
  background: linear-gradient(135deg,
    color-mix(in oklab, var(--color-primary) 40%, white 10%),
    color-mix(in oklab, var(--color-accent-2) 30%, white 10%)
  );
  color: black; font-weight: 700; box-shadow: 3px 3px 0 0 black;
}

/* ===== Gradient Text ===== */
.grad-text {
  background: linear-gradient(90deg, var(--color-primary), var(--color-accent), var(--color-accent-2));
  -webkit-background-clip: text; background-clip: text; color: transparent;
  filter: saturate(calc(1 + var(--hc-text, 0)*.2));
}

/* ===== Hero polish / caret ===== */
.headline { letter-spacing: .3px; text-shadow: 2px 2px 0 black; }
.caret-bar {
  display:inline-block; width: .06em; height: .9em; margin-left: .12em;
  background: currentColor; vertical-align: -0.05em;
  animation: caretBlink 1s steps(1) infinite;
}
.caret-vert {
  width: 3px; height: 1em; background: currentColor;
  animation: caretBlink 1s steps(1) infinite; margin-top: 2px;
}

/* ===== Doctor Strange portal (fixed token) ===== */
.portal { position:absolute; inset:-10%; border-radius:9999px; pointer-events:none; }
.portal::before, .portal::after {
  content:""; position:absolute; inset:0; border-radius:9999px;
  background: conic-gradient(
    from 0deg,
    transparent 0 20%,
    var(--color-glow, #e9d5ff) 21% 24%,
    transparent 25% 49%,
    var(--color-primary) 50% 54%,
    transparent 55% 79%,
    var(--color-accent-2) 80% 84%,
    transparent 85% 100%
  );
  mask: radial-gradient(circle at center, transparent 58%, black 60%);
  animation: spinSlow 8s linear infinite; filter: blur(1px);
}
.portal::after { inset:-4%; opacity:.7; filter: blur(6px) saturate(140%); animation-duration:12s; }

/* ===== Sparkles (subtle stars) ===== */
.sparkles {
  position:absolute; inset:-15%; border-radius:9999px; pointer-events:none;
  background:
    radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.9), transparent 60%),
    radial-gradient(1.5px 1.5px at 70% 60%, var(--color-glow, #e9d5ff), transparent 60%),
    radial-gradient(1.5px 1.5px at 35% 80%, rgba(255,255,255,.9), transparent 60%),
    radial-gradient(2px 2px at 85% 40%, var(--color-primary), transparent 60%);
  filter: blur(.3px); animation: floatY 6s ease-in-out infinite;
}

/* ===== Image skeleton ===== */
.img-skel {
  background: linear-gradient(90deg, rgba(255,255,255,.08), rgba(255,255,255,.2), rgba(255,255,255,.08));
  background-size: 200% 100%; animation: skel 1.2s ease-in-out infinite;
}
@keyframes skel { 0%{background-position: 200% 0} 100%{background-position: -200% 0} }

/* ===== Reveal on scroll ===== */
.reveal { opacity: 0; transform: translateY(16px) scale(.98); transition: opacity .6s ease, transform .6s ease; }
.reveal.is-visible { opacity: 1; transform: translateY(0) scale(1); }

/* ===== Navbar underline + active state (from Navbar.tsx) ===== */
.nav-link { position: relative; }
.nav-link::after {
  content: ""; position: absolute; left: 0; bottom: -6px;
  height: 3px; width: 0%; background: var(--color-primary);
  border-radius: 999px; transition: width .25s ease;
}
.nav-link:hover::after { width: 100%; }
.nav-link[data-active="true"] { color: white; }
.nav-link[data-active="true"]::after { width: 100%; }

/* ===== Orbiting squares ring (single canonical version) ===== */
.squares-ring { position:absolute; inset:-10%; pointer-events:none; }
.squares-ring span {
  --size: 12px;
  position:absolute; top:50%; left:50%;
  width: var(--size); height: var(--size);
  border: 2px solid var(--color-primary);
  border-radius: .35rem;
  transform-origin: -10rem -10rem; /* orbit radius derives from container */
  transform: rotate(calc(var(--i) * 11.25deg)) translateY(-52%);
  opacity:.55;
  filter: drop-shadow(0 0 8px color-mix(in oklab, var(--color-primary) 50%, #000 50%));
  animation: orbit 16s linear infinite, floatY 6s ease-in-out infinite;
  animation-delay: calc(var(--i) * -0.12s);
  background: color-mix(in oklab, var(--color-primary) 15%, transparent);
}
@media (min-width: 640px){
  .squares-ring span { transform-origin: -12rem -12rem; }
}
@media (min-width: 768px){
  .squares-ring span { transform-origin: -14rem -14rem; }
}
@keyframes orbit { to { transform: rotate(calc(var(--i) * 11.25deg + 360deg)) translateY(-52%); } }

/* ===== Rotating cosmic spheres (Hero csphere) ===== */
.orbital {
  position: absolute;
  inset: -6%;
  border-radius: 9999px;
  transform-origin: 50% 50%;
  animation: orbitSpin 14s linear infinite;
  pointer-events: none;
}
.orbital.tilt {
  transform: rotateX(58deg);
  animation: orbitSpinTilt 18s linear infinite reverse;
}
.csphere {
  position: absolute;
  top: 0; left: 50%;
  width: 16px; height: 16px;
  transform: translate(-50%, -50%);
  border-radius: 9999px;
  background:
    radial-gradient(circle at 30% 30%, #fff8, transparent 40%),
    radial-gradient(circle at 55% 60%, color-mix(in oklab, var(--color-primary) 70%, #fff 30%), transparent 60%),
    radial-gradient(circle at 50% 50%, var(--color-accent), var(--color-primary));
  box-shadow:
    0 0 10px color-mix(in oklab, var(--color-primary) 60%, transparent),
    0 0 28px color-mix(in oklab, var(--color-accent) 45%, transparent);
  filter: saturate(1.1);
  mix-blend-mode: screen;
}
.csphere.small { width: 12px; height: 12px; }
@keyframes orbitSpin { to { transform: rotate(360deg); } }
@keyframes orbitSpinTilt { to { transform: rotateX(58deg) rotate(360deg); } }

/* ===== Optional hover sheen for glass cards ===== */
@media (hover:hover){
  .group:hover .rounded-2xl.bg-white\/5 {
    box-shadow: 0 8px 50px -12px rgba(34, 211, 238, .25);
  }
}
@media (hover:hover){
  .rounded-2xl.bg-white\/5:hover {
    box-shadow: 0 10px 60px -12px rgba(34,211,238,.25);
  }
}

/* ===== Comic speech bubble (if used) ===== */
.bubble { position: relative; border: var(--hc-border, 3px) solid black; background: white; color: black; border-radius: 18px; padding: .85rem 1rem; }
.bubble:after { content: ""; position: absolute; left: 20px; bottom: -14px; width: 0; height: 0; border: 8px solid transparent; border-top-color: black; }
.bubble:before { content: ""; position: absolute; left: 20px; bottom: -10px; width: 0; height: 0; border: 8px solid transparent; border-top-color: white; z-index: 1; }
/* ===== Overflow Guards (add to bottom of globals.css) ===== */

/* 1) Global clamp: stop horizontal scrolling */
@supports (overflow: clip) {
  html, body { overflow-x: clip; }
}
@supports not (overflow: clip) {
  html, body { overflow-x: hidden; }
}
html, body { max-width: 100%; position: relative; }

/* 2) Common containers: clip any decorative bleed */
:where(header, footer, .section, .panel, .hero, .content-wrap) {
  overflow-x: clip;
  overscroll-behavior-x: none;
}

/* 3) Long words / code blocks: wrap instead of overflowing */
:where(h1,h2,h3,h4,h5,h6,p,a,span,li,code,pre) {
  overflow-wrap: anywhere; /* modern, safest */
  word-break: normal;
}
pre { white-space: pre-wrap; }

/* 4) Media should never exceed its box */
img, video, canvas, svg { max-width: 100%; height: auto; display: block; }

/* 5) Decorative effects: isolate paint so their shadows/transforms don't expand layout */
:where(.portal, .sparkles, .squares-ring, .orbital) {
  contain: paint;      /* don't affect scroll size */
  pointer-events: none;
  /* If any still bleeds on a page, also add overflow:clip on that page's wrapper */
}
